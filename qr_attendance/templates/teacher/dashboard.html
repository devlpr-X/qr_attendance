{% extends "base.html" %}
{% block title %}–ú–∏–Ω–∏–π —Ö–∏—á—ç—ç–ª“Ø“Ø–¥{% endblock %}
{% block content %}
<style>
  .header-info { background: linear-gradient(135deg, #667eea 0%, #5a74e8 100%);
                 color: white; padding: 1.5rem; border-radius: 8px; margin-bottom: 2rem; }
  .header-info h2 { margin: 0 0 0.5rem 0; }
  .header-info p { margin: 0.2rem 0; opacity: 0.9; }

  .week-card { background: white; padding: 1.5rem; border-radius: 8px;
               box-shadow: 0 2px 8px rgba(0,0,0,0.1); margin-bottom: 2rem; }
  .week-header { background: #f5f5f5; padding: 1rem; border-radius: 6px 6px 0 0;
                 font-weight: 600; color: #333; margin: -1.5rem -1.5rem 1.5rem -1.5rem; }

  .session-table { width: 100%; border-collapse: collapse; }
  .session-table th { background: #e3f2fd; font-weight: 600; color: #1d5ede; }
  .session-table th, .session-table td { padding: 0.8rem; border: 1px solid #ddd; text-align: left; }
  .session-table tr:hover { background: #f9f9f9; }
  .qr-link { color: #2e7d32; font-weight: 600; text-decoration: none; }
  .qr-link:hover { text-decoration: underline; }
  .empty-week { text-align: center; color: #999; padding: 2rem; }
</style>

<div class="header-info">
  <h2>üìÖ –ú–∏–Ω–∏–π —Ö–∏—á—ç—ç–ª“Ø“Ø–¥ ‚Äì {{ semester.school_year }} –æ–Ω—ã {{ semester.term }}-—Ä —Å–µ–º–µ—Å—Ç—Ä</h2>
  <p>üìÖ {{ semester.start_date }} - {{ semester.end_date }}</p><!-- templates/admin_dashboard.html-–¥ –Ω—ç–º—ç—Ö -->
</div>
<div class="header-info">
    <hr>
    <a href="{% url 'timeslots_config' %}">–¶–∞–≥–∏–π–Ω —Ö—É–≤–∞–∞—Ä—å —Ç–æ—Ö–∏—Ä–≥–æ–æ</a>
    <a href="{% url 'semester_list' %}">–°–µ–º–µ—Å—Ç—Ä“Ø“Ø–¥ —É–¥–∏—Ä–¥–∞—Ö</a>
    <hr>
</div>

{% for week_key, sessions in weeks.items %}
  <div class="week-card">
    <div class="week-header">–î–æ–ª–æ–æ —Ö–æ–Ω–æ–≥: {{ week_key }} ({{ sessions|length }} —Ö–∏—á—ç—ç–ª)</div>
    
    <table class="session-table">
      <thead>
        <tr>
          <th>”®–¥”©—Ä</th>
          <th>–•–∏—á—ç—ç–ª</th>
          <th>–¶–∞–≥</th>
          <th>–¢”©—Ä”©–ª</th>
          <th>–ë–∞–π—Ä—à–∏–ª</th>
          <th>–û—é—É—Ç–∞–Ω</th>
          <th>QR</th>
        </tr>
      </thead>
      <tbody>
        {% for s in sessions %}
        <tr>
          <td>{{ s.day_name }}<br><small>{{ s.session_date }}</small></td>
          <td><strong>{{ s.course_name }}</strong><br><small>{{ s.course_code }}</small></td>
          <td>{{ s.timeslot }}</td>
          <td>{{ s.lesson_type }}</td>
          <td>{{ s.location }}</td>
          <td>{{ s.student_count }}</td>
          <td>
            {% if s.token %}
              <a href="/attendance/{{ s.token }}/" class="qr-link">QR –ù—ç—ç—Ö</a>
            {% else %}
              <small style="color: orange;">“Æ“Ø—Å—ç—ç–≥“Ø–π</small>
            {% endif %}
          </td>
        </tr>
        {% empty %}
        <tr><td colspan="7" class="empty-week">–≠–Ω—ç –¥–æ–ª–æ–æ —Ö–æ–Ω–æ–≥—Ç —Ö–∏—á—ç—ç–ª –±–∞–π—Ö–≥“Ø–π</td></tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
{% empty %}
  <div style="text-align: center; padding: 3rem; background: #f5f5f5; border-radius: 8px;">
    <p style="color: #999; font-size: 1.2rem;">üìÖ –•–∏—á—ç—ç–ª –±–∞–π—Ö–≥“Ø–π</p>
  </div>
{% endfor %}
{% endblock %}