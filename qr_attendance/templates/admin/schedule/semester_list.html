{% extends "base.html" %}
{% block title %}–°–µ–º–µ—Å—Ç—Ä“Ø“Ø–¥{% endblock %}
{% block content %}

<style>
  .semester-grid { 
    display:grid; 
    grid-template-columns: repeat(auto-fill, minmax(350px,1fr)); 
    gap:1.5rem; 
  }
  .semester-card { 
    background:white; padding:1.5rem; border-radius:8px; 
    box-shadow:0 2px 8px rgba(0,0,0,0.1); 
    border-left:4px solid #1d5ede; 
  }
  .badge-active { 
    background:#4caf50; color:white; padding:3px 12px; border-radius:20px; 
  }
  .badge-inactive { 
    background:#bdbdbd; color:white; padding:3px 12px; border-radius:20px; 
  }
  .filter-row { 
    margin-bottom:1.5rem; padding:1rem; background:white; 
    border-radius:8px; box-shadow:0 1px 4px rgba(0,0,0,.08); 
  }
  select { padding:0.6rem; border:1px solid #ddd; border-radius:4px; }

  .btn { 
    padding:.6rem 1rem; border:none; border-radius:4px; cursor:pointer; 
    font-weight:600; 
  }
  .btn-edit { background:#1d5ede; color:white; }
  .btn-edit:hover { background:#154fb5; }

  .btn-delete { background:#d32f2f; color:white; }
  .btn-delete:hover { background:#b71c1c; }
</style>

<h2>üìö –°–µ–º–µ—Å—Ç—Ä“Ø“Ø–¥</h2>

<div class="filter-row">
  <form method="GET">
    <label>–°—É—Ä–≥—É—É–ª—å:</label>
    <select name="school_id" onchange="this.form.submit()">
      <option value="">–ë“Ø—Ö —Å—É—Ä–≥—É—É–ª—å</option>
      {% for s in schools %}
        <option value="{{ s.0 }}" {% if selected_school == s.0 %}selected{% endif %}>
          {{ s.1 }}
        </option>
      {% endfor %}
    </select>
  </form>

  <div style="margin-top:1rem;">
    <a href="{% url 'semester_create' %}">
      <button class="btn btn-edit">
        –ù—ç–º—ç—Ö
      </button>
    </a>
  </div>
</div>

{% if semesters %}
<div class="semester-grid">
  {% for sem in semesters %}
    <div class="semester-card">

      <h3>{{ sem.name }}</h3>
      <p>üìÖ {{ sem.start_date }} - {{ sem.end_date }}</p>
      <p>{{ sem.school_name }}</p>
      {% if sem.is_active %}
        <span class="badge-active">–ò–¥—ç–≤—Ö—Ç—ç–π</span>
      {% else %}
        <span class="badge-inactive">–ò–¥—ç–≤—Ö–≥“Ø–π</span>
      {% endif %}

      <!-- BUTTON GROUP -->
      <div style="margin-top:1rem; display:flex; gap:.5rem;">

        <!-- EDIT -->
        <a href="{% url 'schedule_edit' sem.id %}">
          <button class="btn btn-edit">–•—É–≤–∞–∞—Ä—å —Ç”©–ª”©–≤–ª”©—Ö</button>
        </a>

        <!-- DELETE -->
        <form method="POST" action="{% url 'semester_delete' sem.id %}"
              onsubmit="return confirm('–≠–Ω—ç —Å–µ–º–µ—Å—Ç—Ä—ã–≥ –±“Ø—Ä –º”©—Å”©–Ω —É—Å—Ç–≥–∞—Ö —É—É?')">
          {% csrf_token %}
          <button class="btn btn-delete">üóëÔ∏è –£—Å—Ç–≥–∞—Ö</button>
        </form>

      </div>

    </div>
  {% endfor %}
</div>

{% else %}
<div style="padding:2rem;text-align:center;background:#f5f5f5;border-radius:8px;">
  <p style="color:#999;">–°–æ–Ω–≥–æ—Å–æ–Ω —Å—É—Ä–≥—É—É–ª—å–¥ —Å–µ–º–µ—Å—Ç—Ä –∞–ª–≥–∞</p>
</div>
{% endif %}

{% endblock %}
